
### 쉘 스크립트란?

쉘 스크립트(Shell Script)는 리눅스나 유닉스 운영체제에서 사용되는 스크립트 프로그래밍 언어입니다. 쉘 스크립트는 커맨드 라인 인터페이스(CLI)를 통해 사용자가 운영체제와 상호작용할 수 있도록 도와주는 역할을 합니다. 쉘 스크립트는 쉘(Shell)이라는 프로그램을 통해 실행되며, 쉘은 사용자가 입력한 명령을 해석하고 실행하는 역할을 합니다.

쉘 스크립트는 일련의 명령어를 순차적으로 실행하는 스크립트 파일이며, 파일의 확장자는 일반적으로 .sh입니다. 쉘 스크립트는 사용자가 자주 사용하는 명령어나 작업을 자동화하고, 반복적인 작업을 줄이기 위해 사용됩니다. 또한, 쉘 스크립트는 여러 개의 명령어를 묶어서 실행하거나, 조건에 따라 다른 명령어를 실행하는 등의 복잡한 작업도 수행할 수 있습니다.

쉘 스크립트는 다양한 쉘에서 실행할 수 있으며, 주로 사용되는 쉘은 bash(Bourne Again SHell)입니다. 다른 쉘들로는 csh(C SHell), ksh(Korn SHell), zsh(Z SHell) 등이 있습니다.

윈도우에서는 **batch(배치파일, .bat)** 을 한번쯤은 본적이 있을 것이다. bat 파일을 실행하면 프로그램이 자동으로 혼자 쭉쭉 실행되는데, 이러한 bat파일의 리눅스 버젼이 바로 shell script라고 봐도 된다. 물론 윈도우와 리눅스의 스크립트는 서로 다른 문법으로 작동된다.

---

### 쉘 스크립트 문법 정리 - Shebang

- 쉘 작성 첫번째 행
		첫번째행은 다음과 같이 작성해야 한다.
		`#!/usr/bin/bash`
		이 내용은 어떤 쉘로 스크립트를 실행할지 정의하는 곳이다.
		이러한 쉘 선언문을 Shebang이라고 한다.

vi로 쉘 스크립트 파일을 작성하고, 저장을 해준다.
그리고 실행권한 (x)를 주고 쉘을 실행하면, bash의 절


---

- build_start.sh

```bash
#!/bin/bash

export JAVA_HOME=$JAVA17_HOME

nohup ./mvnw clean spring-boot:run > log_$(date "+%Y-%m-%d").log &

echo $! > pid.pid

```

1. `#!/bin/bash`: 이 라인은 이 스크립트가 Bash 셸에서 실행되어야 함을 나타냅니다. 이것은 스크립트의 첫 번째 라인에 있어야 합니다.
    
2. `export JAVA_HOME=$JAVA17_HOME`: 이 라인은 `JAVA17_HOME` 환경 변수의 값을 `JAVA_HOME` 환경 변수로 설정합니다. 이렇게 하면 스크립트에서 `$JAVA_HOME`을 사용하여 Java 17의 위치를 참조할 수 있습니다.
    
3. `nohup ./mvnw clean spring-boot:run > log_$(date "+%Y-%m-%d").log &`: 이 라인은 `nohup` 명령을 사용하여 Maven을 실행하고, `clean`과 `spring-boot:run` 명령을 사용하여 Spring Boot 애플리케이션을 실행합니다. `nohup`은 프로세스를 백그라운드로 실행하고, 터미널이 종료되어도 프로세스가 계속 실행되도록 합니다. `>`는 출력을 파일로 리다이렉션하는데, 여기서는 `log_$(date "+%Y-%m-%d").log` 파일에 날짜를 포함한 로그 파일을 생성합니다. `&`는 명령을 백그라운드로 실행하도록 합니다.
    
4. `echo $! > pid.pid`: 이 라인은 마지막으로 실행된 백그라운드 프로세스의 PID(프로세스 ID)를 `pid.pid` 파일에 저장합니다. 이렇게 하면 나중에 프로세스를 종료할 수 있습니다.

- stop.sh

```bash
#!/bin/bash

kill -9 $(cat pid.pid) && rm -f pid.pid
```

1. `#!/bin/bash`: 이 라인은 이 스크립트가 Bash 셸에서 실행되어야 함을 나타냅니다. 이것은 스크립트의 첫 번째 라인에 있어야 합니다.
    
2. `kill -9 $(cat pid.pid)`: 이 라인은 `pid.pid` 파일에 저장된 PID를 읽어와서 해당 PID를 가진 프로세스를 강제로 종료합니다. `-9` 옵션은 SIGKILL 시그널을 사용하여 프로세스를 종료하는 것을 의미합니다.
    
3. `&&`: 이 라인은 이전 명령이 성공적으로 실행된 경우에만 다음 명령을 실행합니다.
    
4. `rm -f pid.pid`: 이 라인은 `pid.pid` 파일을 삭제합니다. `-f` 옵션은 파일이 없어도 오류를 표시하지 않고 조용히 실행하도록 합니다.
