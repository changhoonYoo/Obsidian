
OAuth 2.0(Open Authorization 2.0)은 인증을 위한 개방형 표준 프로토콜
이 프로토콜에서는 Third-Party 프로그램에게 리소스 소유자를 대신하여 리소스 서버에서 제공하는 자원에 대한 접근 권한을 위임하는 방식을 제공

구글, 페이스북, 카카오, 네이버 등에서 제공하는 간편 로그인 기능도 OAuth2 프로토콜 기반의 사용자 인증 기능을 제공하고 있다.

> OAuth 2.0 주요 용어

| Authentication     | 인증, 접근 자격이 있는지 검증하는 단계                                                                               |
| ------------------ | ---------------------------------------------------------------------------------------------------- |
| Access Token       | 리소스 서버에게서 리소스 소유자의 보호된 자원을 획득할 때 사용되는 <br>만료 기간이 있는 토큰                                               |
| Refresh Token      | Access Token 만료 시 이를 갱신하기 위한 용도로 사용하는 Token<br>일반적으로 Access Token보다 만료 기간이 길다.                       |
| Scope              | 범위는 클라이언트가 리소스에 대한 어떤 작업을 수행할 수 있는지를 정의하는 문자열<br>범위는 권한 서버에 의해 정의되며, 클라이언트는 특정 범위의 엑세스 권한을 요청할 수 있다. |
| Authorization Code | 인증 코드는 클라이언트가 엑세스 토큰을 얻기 위한 중간 단계로 사용하는 코드<br>인증 코드 부여 방식을 통해 권한 서버로부터 발급, 이를 사용하여 토큰을 얻는다.          |

> Roles - OAuth 2.0의 역할

| 리소스 소유자<br>(Resource Owner)     | 보호된 자원에 접근할 수 있는 자격을 부여해 주는 주체.<br>OAuth2 프로토콜 흐름에서 클라이언트를 인증하는 역할을 수행<br>인증이 완료되면 권한 획득 자격을 클라이언트에게 부여<br>개념적으로는 리소스 소유자가 자격을 부여하는 것이지만, <br>일반적으로 권한 서버가 리소스 소유자와 클라이언트 사이에서 중개 역할을 수행 |
| ------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 클라이언트<br>(Client)               | 보호된 자원을 서용하려고 접근 요첯을 하는 애플리케이션                                                                                                                                                           |
| 권한 서버<br>(Authorization Server) | 권한 서버는 클라이언트가 리소스 소유자의 권한을 얻을 수 있도록 도와주는 서버<br>권한 서버는 사용자 인증, 권한 부여 및 토큰 발급을 관리                                                                                                          |
| 리소스 서버 <br>(Resource Server)    | 사용자의 보호된 자원을 호스팅하는 서버로 엑세스를 허용하거나 거부한다.<br>이 서버는 OAuth 2.0 토큰을 사용하여 클라이언트에게 리소스에 엑세스할 권한을 부여하고 실제 데이터를 제공한다.                                                                             |

> Obtaining Authorization

OAuth2 프로토콜에서는 다양한 클라이언트 환경에 적합하도록 권한 부여 방식에 따른 프로토콜을 4가지 종류로 구분하여 제공하고 있다.

1. Authorization Code Grant | 권한 부여 승인 코드 방식
	권한 부여 승인을 위해 자체 생성한 Authorization Code를 전달하는 방식으로 많이 쓰이고 기본이 되는 방식.
	간편 로그인 기능에서 사용되는 방식으로 클라이언트가 사용자를 대신하여 특정 자원에 접근을 요청할 때 사용되는 방식
	보통 타사의 클라이언트에게 보호된 자원을 제공하기 위한 인증에 사용
	![[1.jpg]]
	권한 부여 승인 요청 시 response_type을 code로 지정하여 요청한다. 이후 클라이언트는 권한 서버에서 제공하는 로그인 페이지를 브라우저를 띄워 출력한다. 이 페이지를 통해 사용자가 로그인을 하면 권한 서버는 권한 부여 승인 코드 요청 시 전달받은 redirect_url로 Authorization Code를 전달한다.
	Authorization Code는 권한 서버에서 제공하는 API를 통해 Access Token으로 교환
	
1. Implicit Grant | 암묵적 승인 방식
1. Resource Owner password Credentials Grant | 자원 소유자 자격증명 승인 방식
2. Client Credentials Grant | 클라이언트 자격증명 승인 방식